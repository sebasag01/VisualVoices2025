<div class="card-container">
  <div
    class="card"
    [class.card-leaving]="isLeaving"
    (animationend)="onAnimationEnd()"
  >
    <ng-container *ngIf="showWelcome; else normalContent">
      <h2>¡Es hora de jugar!</h2>
      <p>Completa niveles para avanzar hacia los siguientes</p>

      <div class="level-buttons-container">
        <button
          *ngFor="let lvl of availableLevels"
          (click)="onLevelSelect(lvl)"
          [disabled]="lvl > unlockedLevel"
          [ngClass]="{ 'disabled-button': lvl > unlockedLevel }"
          class="learn-more"
        >
          
          <ng-container *ngIf="lvl > unlockedLevel">
            <i class="fa-solid fa-lock"></i> Nivel {{ lvl }}
          </ng-container>
          <ng-container *ngIf="lvl <= unlockedLevel">
            Nivel {{ lvl }}
          </ng-container>
        
        </button>
      </div>
    </ng-container>

      <!-- <ng-template #secondStep>
      <ng-container *ngIf="showWelcome && showChooseLevel; else normalContent">
        <p>Selecciona un nivel:</p>
        <div *ngFor="let lvl of availableLevels">
          <button (click)="onLevelSelect(lvl)">Nivel {{ lvl }}</button>
        </div>
      </ng-container>
      </ng-template> -->

      <ng-template #normalContent>
        <!-- Contenedor para el botón con la palabra, que se mostrará mucho más arriba -->
        <div class="word-button-container">
          <span class="word-button" (click)="onWordButtonClick()">
            {{ word || "Cargando..." }}
          </span>
        </div>

        <!-- Explicación dinámica -->
        <div class="explanation">
          {{ explanation || "Explicación guiada para cada botón" }}
        </div>

        <!-- Contenedor para las flechas de navegación, que se mantendrán abajo con separación -->
        <div class="navigation-arrows">
          <button class="prev-button" (click)="prevCard()">
            <img
              src="assets/left-arrow.png"
              alt="Anterior"
              class="arrow-icon"
            />
          </button>
          <button class="next-button" (click)="nextCard()">
            <ng-container *ngIf="nextLabel === 'Siguiente'; else avanzarNivel">
              <img
                src="assets/right-arrow.png"
                alt="Siguiente"
                class="arrow-icon"
              />
            </ng-container>
            <ng-template #avanzarNivel>
              {{ nextLabel }}
            </ng-template>
          </button>
        </div>
      </ng-template>
  </div>
</div>
