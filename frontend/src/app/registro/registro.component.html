<form class="registro-form" (ngSubmit)="registerUser()">
  <h2 class="registro-title">¡Únete a nosotros!</h2>

  <!-- Email -->
  <div class="form-group" [ngClass]="{'show-error': errorField === 'email' || emailAlreadyExists}">
    <input
      type="email"
      placeholder="Correo electrónico"
      [(ngModel)]="user.email"
      name="email"
      class="input-field"
      required
    />
    <p class="error-message" [class.visible]="errorField === 'email'">
      <i class="fa-solid fa-triangle-exclamation"></i> {{ errorMessage }}
    </p>
    <p class="error-message" [class.visible]="emailAlreadyExists">
      <i class="fa-solid fa-triangle-exclamation"></i> Este correo electrónico ya está registrado.
    </p>
  </div>

  <!-- Password -->
  <div class="form-group" [ngClass]="{'show-error': errorField === 'password'}">
    <div class="password-container">
      <input
        [type]="passwordFieldType"
        placeholder="Contraseña"
        [(ngModel)]="user.password"
        name="password"
        class="input-field"
        required
        (focus)="onPasswordFocus()"
        (blur)="showPasswordHint = false"
      />
      <button type="button" class="toggle-password-btn" (click)="togglePasswordVisibility()">
        <i [ngClass]="passwordFieldType === 'password' ? 'fa fa-eye' : 'fa fa-eye-slash'"></i>
      </button>
    </div>
    <p class="error-message" [class.visible]="errorField === 'password'">
      <i class="fa-solid fa-triangle-exclamation"></i> {{ errorMessage }}
    </p>
    <div *ngIf="showPasswordHint" class="password-hint"
      [ngStyle]="{'color': isPasswordValid() ? 'green' : 'gray'}"
      style="font-size: 0.9em; margin-bottom: 5px;">
      La contraseña debe tener entre 8 y 12 caracteres, al menos una letra mayúscula, una letra minúscula, un número y un carácter especial (!&#64;#$%^&*())
    </div>
  </div>

  <!-- Repeat Password -->
  <div class="form-group" [ngClass]="{'show-error': errorField === 'repeatPassword'}">
    <div class="password-container">
      <input
        [type]="passwordFieldType"
        placeholder="Repetir contraseña"
        [(ngModel)]="user.repeatPassword"
        name="repeatPassword"
        class="input-field"
        required
      />
    </div>
    <p class="error-message" [class.visible]="passwordMismatch">
      <i class="fa-solid fa-triangle-exclamation"></i> Las contraseñas no coinciden.
    </p>
  </div>

  <button type="submit" class="btn">Registrarse</button>
</form>
